<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controlador IoT ESP32 | Portfolio</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="navbar" style="backdrop-filter: none; background: transparent; border: none;">
        <div class="logo">
            <a href="index.html" style="text-decoration: none; color: var(--text-color); font-size: 1rem;">
                ← Volver al Portfolio
            </a>
        </div>
    </nav>

    <header class="project-hero" style="background-image: url('https://images.unsplash.com/photo-1553406830-ef2513450d76?q=80&w=1000&auto=format&fit=crop');">
        <div class="project-hero-content">
            <h1>Controlador Industrial IoT basado en ESP32</h1>
            <p>Diseño de PCB de 4 capas, Firmware en C++ y comunicación MQTT segura.</p>
             <div class="tags" style="margin-top: 20px;">
                <span>Altium Designer</span>
                <span>C++ / IDF</span>
                <span>MQTT</span>
                <span>Prototipado</span>
            </div>
        </div>
    </header>

    <main class="project-container">
        <article class="project-content">
            
            <h2>Resumen del Proyecto</h2>
            <p>Este proyecto nació de la necesidad de controlar y monitorear maquinaria antigua en una planta piloto, donde no existía infraestructura de red cableada. El objetivo era diseñar un dispositivo robusto, de bajo coste y fácil instalación capaz de leer sensores industriales (4-20mA, digitales) y enviarlos a un servidor central.</p>
            <p>El resultado es una PCB compacta basada en el SoC ESP32-WROOM, que maneja la lógica de control y la conectividad Wi-Fi/Bluetooth, integrando protecciones de grado industrial en las entradas y salidas.</p>

            <h3>Desafíos Técnicos (Hardware)</h3>
            <p>El mayor reto fue el diseño de la fuente de alimentación y el aislamiento. El entorno industrial es muy ruidoso eléctricamente.</p>
            <ul>
                <li><strong>Alimentación:</strong> Implementé una fuente conmutada (Buck converter) para aceptar un rango amplio de entrada (12V - 24V DC) con protección contra polaridad inversa.</li>
                <li><strong>Aislamiento:</strong> Las entradas digitales utilizan optoacopladores para separar galvánicamente el microcontrolador de los sensores de campo.</li>
            </ul>

            <img src="https://images.unsplash.com/photo-1625808684179-a79313e8c6eb?q=80&w=1000&auto=format&fit=crop" alt="Esquemático del PCB" class="project-image-full">
            <p class="descripcion" style="text-align: center; font-size: 0.9rem;">Fig 1. Vista 3D del diseño en Altium Designer.</p>

            <h3>La Solución (Firmware)</h3>
            <p>El firmware se desarrolló utilizando el framework ESP-IDF de Espressif en C++ para obtener el máximo rendimiento y control sobre los recursos del hardware.</p>
            <p>Se implementó una máquina de estados finitos para manejar la conexión Wi-Fi y la reconexión automática al broker MQTT en caso de pérdida de señal, garantizando la fiabilidad de los datos.</p>

            <pre><code><span class="code-comment">// Ejemplo de la máquina de estados de conexión</span>
void WiFiManager::handleConnection() {
    switch (currentState) {
        case WIFI_DISCONNECTED:
            <span class="code-keyword">if</span> (attemptConnection()) {
                currentState = WIFI_CONNECTING;
            }
            break;
        case WIFI_CONNECTED:
            // Verificar MQTT...
            break;
    }
}</code></pre>

            <div class="project-links">
                <h3>Enlaces y Recursos</h3>
                <a href="https://github.com/tu-usuario/tu-repo" target="_blank" class="btn-secondary">Ver en GitHub</a>
                <a href="#" class="btn-secondary">Descargar Esquemático (PDF)</a>
            </div>

        </article>
    </main>

    <footer id="contacto">
        <p>¿Te interesa este proyecto?</p>
        <a href="mailto:tuemail@ejemplo.com" class="email-link">Hablemos de los detalles</a>
    </footer>

    <script src="script.js"></script>
</body>
</html>